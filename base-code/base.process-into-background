## >:] ##

# name  = base.process-into-background

<[base.log]>->( 1, 'process going into background..,' );

chdir '/' or die "cannot chdir to / : \l$OS_ERROR";
open STDIN, '/dev/null'
    or die "cannot open /dev/null for reading : \l$OS_ERROR";
open STDOUT, '>/dev/null'
    or die "cannot open /dev/null for writing : \l$OS_ERROR";
defined( my $pid = fork ) or die "cannot fork : \l$OS_ERROR";
exit if $pid;
POSIX::setsid() or die "setsid() not successful : \l$OS_ERROR";
open STDERR, '>&STDOUT' or die "cannot dup stdout : \l$OS_ERROR";

IO::AIO::reinit();  # <-- makes base.s_read() and base.s_write() work again..,

# if($pid=fork){exit($pid)}
# else
# {
#     close(STDIN);
#    close(STDOUT);
#    close(STDERR);
#
# }

#,,,.,,.,,...,...,,.,,,.,,.,.,.,.,,.,,,,,,...,..,,...,...,,..,,,,,.,.,,,,,,.,,
#UA3BX6REVVVECCYIRG2AJ6XATL7TUH6BYR6N4TCIA2ABEQXJUDEI7NS6PFSCRM2XKP3USGPMJNOZ2
#\\\|P3W7SJUOJ33YOXARD4JRAOXVK542ZCVDU2HV7VZU6TUBGFFJFBV \ / AMOS7 \ YOURUM ::
#\[7]NYWG53KPVBU4MYJYQJJZMWCIC7JQQAKN6KGGCFZ5K3XCZLSVUODA 7  DATA SIGNATURE ::
#:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
