#!/usr/bin/perl
use v5.10;
use strict;
use warnings;
use English;

$ENV{'DISPLAY'} //= ':0.0';

( my $check_string = qx| xsel -o | ) =~ s'^\s+|\s+$''sg;

exit(0) if not length $check_string;

my $text_file = '/tmp/.osd_harmony.' . $PID;
my @aosd_opts
    = ( qw| -p 1 -e 1 -o 2400 -y 17 -x 0 -n WhiteRabbit -i |, $text_file );

my $msg;
if (system( qw| harmony -q |, $check_string ) == 0
    and ( $check_string !~ m|^\d+(\.\d+)?$|
        or system( qw| harmony -q -n |, $check_string ) == 0 )
) {
    $msg = "'$check_string'  IS  HARMONIC =)\n";
    push( @aosd_opts, qw| -u 2400 -R #0069B7 | );
} else {
    $msg = "'$check_string'  is  _NOT_  harmonic  `:|\n";
    push( @aosd_opts, qw| -u 1200 -R #7700CD | );
}

open( FILE, '>', $text_file ) or die "[ $text_file ] $!\n";
print FILE $msg;
close FILE;

system( '/usr/bin/aosd_cat', @aosd_opts );

# ______________________________________________________________________________
#\\B5D7YFAB5Z2UZY2GYRV6RWYNDPZO7GEYX3RKQLD5FIHT7WMGRD227ZSLICSZRKRCKISEWHKEHLWLG
# \\ IJFUFD7KD75KDC2KJZAAUH3NLYBHPQI5R3SJC7VKMCX6JGQGZIXW \\// C25519-BASE-32 //
#  \\// VPVRXVTRX4N332J2QVEOML6PSSG46FH22H5UZSTSORBZAJGYODI \\ CODE SIGNATURE \\
#   ````````````````````````````````````````````````````````````````````````````
