#!/usr/bin/perl
use v5.24;
use strict;
use English;
use warnings;

## add elf mode[s] option ## [LLL]

my $silent          = 0;
my $force_numerical = 0;
my $no_num_chk      = 0;

$silent = 1 if @ARGV > 1 and $ARGV[0] eq qw| -silent |       and shift(@ARGV);
$force_numerical = 1 if @ARGV > 1 and $ARGV[0] eq qw| -num | and shift(@ARGV);
$no_num_chk = 1 if @ARGV > 1 and $ARGV[0] eq qw| -nonum |    and shift(@ARGV);

BEGIN {
    use File::Spec;
    use Cwd qw| abs_path |;
    use FindBin qw| $RealBin |;
    our $up_dir = File::Spec->updir;
    our $Bin    = $RealBin;
    my $root_path      = abs_path( r2_abs( c_dir( $Bin, $up_dir ) ) );
    my $local_lib_path = abs_path( c_dir( $root_path, 'data/lib-path/pm' ) );
    die "\n:\n:: not found : $local_lib_path\n:\n" if !-d $local_lib_path;
    unshift( @INC, $local_lib_path )               if -d $local_lib_path;
    sub c_dir  { File::Spec->catdir(@_) }
    sub r2_abs { File::Spec->rel2abs(@_) }
}

my $FXI = 202;    ## program return code for asserted FALSE ##

use AMOS::Assert qw| numerical numerical_no_prefix |;
use AMOS::Assert::Truth qw| is_true |;

my $check_string = join( ' ', @ARGV );

my $rst = "\e[0m";
my $bl  = "\e[1m";
my $bg  = "\e[48;2;9;5;42m";
my $fT  = "\e[38;2;6;71;195m";
my $fg  = "\e[38;2;68;39;172m";
my $no  = "\e[38;2;197;141;7m";
my $ng  = "\e[38;2;71;195;6m";

my $check_elf = $force_numerical ? 0 : 1;
my $numerical = $no_num_chk ? 0 : $check_elf ? 2 : 1;

my ( $true, @modes ) = is_true( $check_string, $numerical, $check_elf );

my $mode_str = @modes ? sprintf( " : %s", join( ' ', @modes ) ) : '';

if ($true) {
    say "$fg:\n:: $bl${fT}TRUE$rst$fg$mode_str :: "
        . "$bg'$fT$check_string$fg'$rst$fg .:\n:$rst"
        if not $silent;

    exit(0);
} else {
    say "$fg:\n:: $bl${ng}FALSE$rst$fg$mode_str : "
        . "$bg'$ng$check_string$fg'$rst$fg :.\n:$rst"
        if not $silent;

    exit($FXI);
}

#.............................................................................
#MWRFJZSKOS5OP3GLWEDK6BTD74GQICMOZ47W2LOFZKVLALU3IKLWYXLCW3LFBTFULM3XDD7LTMC5A
#::: KLJSULKY4JZTADWASJGXUQUS3D7MI6KK5LTZNFFWHICX3RD7SXY :::: NAILARA AMOS :::
# :: JQJVOZ6S6CSF2J7XES4P7U6JWCPMLDS5SWJ7XQ5UILGW6DQT54BI :: CODE SIGNATURE ::
# ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
