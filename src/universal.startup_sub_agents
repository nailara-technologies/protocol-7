# >:]

# name = universal.startup_sub_agents

return if <universal.agents_started>;

<[base.log]>->( 1, "starting display [sub]agents..," );

my %display_agents;
map { $display_agents{$_} = 1 } values %{<universal.content.agent_map>};
foreach my $agent_name ( keys(%display_agents) ) {
    $data{'auth'}{'setup'}{'usr'}{$agent_name}
        //= ':unix:' . <system.privs.user>;
    <universal.child>->{$agent_name}->{'status'} = 'starting';
    if ( !<[universal.start_agent]>->($agent_name) ) {
        <[base.log]>->(
            0, "<!> unable to start '$agent_name', shutting down..,"
        );
        exit(2);
    }
    <universal.agents_started>++;
}

if ( !<universal.declared_online> ) {
    <universal.declared_online>++;
    <[base.async.get_session_id]>;    # 'universal' agent status -> 'online'
}

# ______________________________________________________________________________
#\\UX45EH6HCHCFIPAWSMYSIMQLYPM2TUG43C6HEMGAFOTLM3MDZCCRDOA34XYLEO6J4AFPEIZ7EIGX2
# \\ OFPBL5SWJRG26Q6TO7CWYVFB2YAPGJP3AIYKYITREHOQOEDBOGV3 \\// C25519-BASE-32 //
#  \\// 7RTQKEQ4YUBQM4ZQQ3UO46YM72MLSOPS4XXXGMMB4QKKCDY24AQ \\ CODE SIGNATURE \\
#   ````````````````````````````````````````````````````````````````````````````
