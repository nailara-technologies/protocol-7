# >:]

# name = media.init_code

use IPC::Open2;

$SIG{'CHLD'} = $code{'media.handler.sig_chld'};

<media.lsp_name>
    = defined <system.agent.subname>
    ? 'loadsplash[' . <system.agent.subname> . ']'
    : 'loadsplash[' . $$ . ']';

my @dis_cmds = @{ $data{'disabled_commands'} };
$data{'disabled_commands'} = [];
map { push( @{ $data{'disabled_commands'} }, $_ ) if $_ ne 'whoami' } @dis_cmds;
$data{'base'}{'cmd'}{'whoami'} = 'base.cmd.whoami';

<media.cmdline_mods> = { 'browser' => 'Gtk3 Glib::Event Gtk3::WebKit' };

<core.reroute.command>->{'core.playlist.get_list'}       = 'get_list';
<core.reroute.command>->{'core.playlist.get_list_types'} = 'get_list_types';
<core.reroute.command>->{'core.report_paused'}           = 'report_paused';
<core.reroute.command>->{'layout.get_geometry'}          = 'get_geometry';
<core.reroute.command>->{'layout.get_coordinates'}       = 'get_coordinates';
<core.reroute.command>->{'layout.assign_window'}         = 'set_window_id';
<core.reroute.command>->{'layout.get_subconfig'} = 'core.layout.get_subconfig';

<media.switch_timeout> //= 7; # restart media agent after 7 secs resume timeout!
<media.playlist_was_empty>    //= 0;
<media.cfg.autospeed_notrans> //= 1;

0;
