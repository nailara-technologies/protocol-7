# >:]

# name  = xserver.cmd.get_window_count
# descr = count currently open windows [no 'popups']

my $title_pattern = $$call{'args'};

return scalar <[xserver.get_window_ids]> if !length( $title_pattern // '' );

## implement match windows ##

my $xtops = <xserver.x11_tops>;
<[xserver.update-xtops]>;

return {
    'mode' => 'ack',
    'data' => scalar keys %{ $xtops->byid }
};

# ______________________________________________________________________________
#\\GYTIQSKULAPMDJWF77VSFKNWVINYK4VLTCAYMA6UDYFW2QH5MSX36Q5MZBLIDICSLUFPZVO6FWAQM
# \\ HPUW7COSXYSTKOPI6W6LGRFYX3QFJ5BY7XQZNEZWO6NGSCP3LJYG \\// C25519-BASE-32 //
#  \\// 6BRIYGDKGPAHSAL73BDJLDFVOD6IJPFL6FJVHQA3UGYJKS2TICQ \\ CODE SIGNATURE \\
#   ````````````````````````````````````````````````````````````````````````````
