# >:]

# name = root.callback.object.agent

my $object_id = shift;
return undef if not exists <dependency.object>->{$object_id};
my $object_type = <dependency.object>->{$object_id}->{'type'};
if ( $object_type ne 'agent' ) {
    <[base.log]>->(
        0,
        "object $object_id is not of type agent but '$object_type'!"
    );
    return undef;
}
my $agent_id = <dependency.object>->{$object_id}->{'agent_id'};
return undef if not exists <root.agent.setup>->{$agent_id};
foreach my $id ( keys %{<root.agent.instance>} ) {
    return 1
        if <root.agent.instance>->{$id}->{'agent_id'} == $agent_id
        and <root.agent.instance>->{$id}->{status} eq 'online';
}
return 0;    # not online
