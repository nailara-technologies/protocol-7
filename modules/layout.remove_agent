# >:]

# name = layout.remove_agent

my ( $profile_name, $agent_name ) = @_;
die "expected valid profile name"
    if not defined $profile_name or !length($profile_name);
die "expected valid agent name"
    if not defined $agent_name or !length($agent_name);

my $profile_data = <layout.config.profiles>->{$profile_name}->{$agent_name};

my $stop_agents = $profile_data->{'stop_agents'};
$stop_agents = $agent_name if not defined $stop_agents;

<[base.log]>->( 1, "removing agents from '$agent_name' profile.." );

<[base.proto.nailara.command.send.local]>->(
    {   'command'   => 'core.root.stop',
        'call_args' => { 'args' => $stop_agents },
        'reply'     => {
            'handler' => 'dev.null',
            'params'  => {}
        }
    }
);
