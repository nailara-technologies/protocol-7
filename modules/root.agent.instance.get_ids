# >:]

# name  = root.agent.get_id
# descr = return agent id for given name from setup (in order of creation)
# note  = doesn't deal with multiple agent setups for same name yet!

my $instance_ids = [];
my $agent_id     = shift;
die 'root.agent.instance_get_ids: agent id required'
    if not defined $agent_id or $agent_id !~ /^\d+$/;

foreach my $id (
    sort {
        <root.agent.instance>->{$a}->{'created'} <=>
            <root.agent.instance>->{$b}->{'created'}
    } keys %{<root.agent.instance>}
    ) {
    push( @{$instance_ids}, $id )
        if <root.agent.instance>->{$id}->{'agent_id'} == $agent_id;
}

return $instance_ids;
