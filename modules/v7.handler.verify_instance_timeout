## [:< ##

# name = v7.handler.verify_instance_timeout

my $params      = shift->w->data;
my $instance_id = $params->{'instance_id'};
if ( not exists <v7.zenka.instance>->{$instance_id} ) {
    <[base.logs]>->(
        2, '<verify_instance_timeout> gone instance %d', $instance_id
    );
    return;
}
my $instance = <v7.zenka.instance>->{$instance_id};

<[base.logs]>->(
    0,            '<< instance %d [ %s ] verification timeout >>',
    $instance_id, $instance->{'zenka_name'}
);

<[zenka.change_status]>->( $instance_id, qw| error | );

delete $instance->{'timer'}->{'verify_instance'};
delete $instance->{'timer'} if not keys %{ $instance->{'timer'} };

#,,.,,..,,..,,,.,,..,,,,,,...,...,..,,,.,,...,..,,...,..,,.,,,,.,,,,,,...,...,
#GI2JR7VWLJS4AJCUN5YAPTPW6FSHAQT26FUCQCECXUYN6ND2YFCFFSKFRMD2CRIXJ7G2HYDAUBDPW
#\\\|PM4YEEGAWQ25WTRRJA3K44J2VEHEMSC7RM24747UKBGMHQDGMUE \ / AMOS7 \ YOURUM ::
#\[7]VRXIPQA23MQDZKT3VVV27AGAHUCFSXJSY2X7N54TNPWQDELMIKAY 7  DATA SIGNATURE ::
#:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
