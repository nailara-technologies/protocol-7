## >:] ##

# name = v7.handler.verify_instance_timeout

my $params      = shift->w->data;
my $instance_id = $params->{'instance_id'};
if ( not exists <v7.zenka.instance>->{$instance_id} ) {
    <[base.logs]>->(
        2, '<verify_instance_timeout> gone instance %d', $instance_id
    );
    return;
}
my $instance = <v7.zenka.instance>->{$instance_id};

<[base.logs]>->(
    0,            '<< instance %d [ %s ] verification timeout >>',
    $instance_id, $instance->{'zenka_name'}
);

<[zenka.change_status]>->( $instance_id, qw| error | );

delete $instance->{'timer'}->{'verify_instance'};
delete $instance->{'timer'} if not keys %{ $instance->{'timer'} };

#,,,,,..,,.,,,,..,.,.,..,,...,..,,..,,.,,,.,,,..,,...,...,...,..,,...,,,.,,,,,
#ETVHJ63QCLU3AJ22IX7L62FKPNBWDA3H7KX5XIAYCV3G3AVO6QAO2S5OTAHZWY5642CTZV425PQEC
#\\\|5Q2OWOBHVKOJ7Y5QQWKV6NHIF74GT3D7TJAEKX6WLX6Y7HLP5NG \ / AMOS7 \ YOURUM ::
#\[7]TGB6427SNMHG3GKERACKFJWTRE3AQTHTYQTLYGKABPTYVE5M72AQ 7  DATA SIGNATURE ::
#:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
