# >:]

# name       = agent.cmd.add_agent

my $agentname = $_[2];
if ( $agentname eq '' ) {
    <[net.nack]>->( "no agentname supplied", $_[1] );
    <[base.log]>->( 0, "[$_[0]] add_agent: no agentname supplied" );
    return 0;
} else {
    my $agent_id = <[agent.add_agent]>->($agentname);
    if ($agent_id) {
        <[net.ack]>->(
            "$agent_id $agentname " . $data{'agent'}{$agent_id}{'status'}, $_[1]
        );
        <[base.log]>->( 1, "[$_[0]] adding agent [$agentname|$agent_id]" );
    } else {
        <[net.nack]>->( "failed to add agent", $_[1] );
        <[base.log]>->( 0, "[$_[1]] failed to add agent" );
    }
}
