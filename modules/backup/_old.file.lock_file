# >:]

# name       = _old.file.lock_file

my $fd = $_[0];
if ( ref($fd) eq 'GLOB' and fileno($fd) ) {
    if ( flock( $fd, LOCK_EX ) ) {
        <[base.log]>->( 2, "file locked ($fd)");
        return 1;
    }
    else { <[base.log]>->( 0, "lock_file: lock failed [$!]"); }
}
else { <[base.log]>->( 0, "lock_file: invalid file handle ($fd)") }
return 0;
