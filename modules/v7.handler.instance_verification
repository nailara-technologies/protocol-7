## [:< ##

# name = v7.handler.instance_verification

my ( $instance_id, $verification_string ) = @_;
my $instance = <v7.zenka.instance>->{$instance_id};

if ( exists $instance->{'timer'}->{'verify_instance'} ) {
    $instance->{'timer'}->{'verify_instance'}->cancel;
    delete $instance->{'timer'}->{'verify_instance'};
    delete $instance->{'timer'} if !keys %{ $instance->{'timer'} };
}

if ( $verification_string eq $instance->{'instance_verification'} ) {
    <[base.log]>->( 1, "instance $instance_id : verified : success =)" );
    delete $instance->{'instance_verification'};
    <[zenka.change_status]>->( $instance_id, 'online' );
} else {
    <[base.log]>->( 0, "instance $instance_id could not be verified ..," );
    delete $instance->{'instance_verification'};
    <[zenka.change_status]>->( $instance_id, 'error' );
}

#,,,,,...,,.,,,.,,..,,,..,,.,,.,,,,..,,.,,...,..,,...,...,,..,,,.,,,,,..,,...,
#QXHNELRZ2OOZJLTTGNZZTGT34MJXTYRF3IORI6WQID4OC6LMNYW4VJJMVDPN4S4KO2FZADZ5WQXFM
#\\\|C2B4QBV4ZVDB4PQDRGT5RXQRIAVW3Y5YOZB5AHS3LV762ZSHISX \ / AMOS7 \ YOURUM ::
#\[7]XFAQIZX4GTHSEU62S3VBLSDR7EXYLKGOORZ4XEOSRG2N6HBUGKBQ 7  DATA SIGNATURE ::
#:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
