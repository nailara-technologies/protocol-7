# >:]

# name = xserver.handler.wait_for_display

my $watcher = shift->w;

if (<[xserver.display_connected]>) {
    $watcher->cancel if $watcher->is_active;
    my $agent_name = <system.agent.name>;
    <[base.log]>->( 0, "<!> display is now on / connected <!>" );
    <[base.log]>->( 0, " :. restarting $agent_name agent..." );
    <[base.proto.nailara.command.send.local]>->(
        {   'command'   => 'core.root.restart',
            'call_args' => { 'args' => $agent_name }
        }
    );
}
