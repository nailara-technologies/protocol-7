# >:]

# name = layout.handler.get_instance_ids_reply

my $reply      = shift;
my $params     = $reply->{'params'};
my $callback   = delete $params->{'callback'};
my $agent_name = $params->{'agent_name'};

if ( $reply->{'cmd'} eq 'NACK' ) {
    <[base.log]>->( 1, "<!> failed to obtain instance ids for '$agent_name'" );
    $params->{'remove'}       = 0;
    $params->{'status'}       = 'start';
    $params->{'instance_ids'} = $agent_name;
} else {
    $params->{'instance_ids'} = $reply->{'call_args'}->{'args'};
}

$code{$callback}->($params);
