## [:< ##

# name  = base.comp-int.is_valid
# descr = assert validity of BER compressert integer [ pack template 'w' ]

## note : can be multiple, but must be correctly terminated [ w* template ] ##

my $compressed_int = shift;

if ( not length( $compressed_int // '' ) ) {
    warn 'expected compressed integer parameter [ got nothing ] <{C1}>';
    return undef;
}

my $is_terminated   = 0;
my $numbers_counted = 0;

foreach my $check_byte ( split '', $compressed_int ) {

    if ( vec( $check_byte, 7, 1 ) == 0 ) {    ## first bit 0 [ terminated ] ##

        $is_terminated = 5;                   ## true ##
        $numbers_counted++;

    } else {
        $is_terminated = 0;    ## first bit 1 [ unterminated ] ##
    }
}

if ($is_terminated) {    ## valid compressed integer[s] ##

    return $numbers_counted;    ## true ##

} else {    ##  unterminated : not valid comp-int  ##

    return FALSE;    ##  false  ##
}

#,,..,,,.,,,,,..,,,,,,,,,,..,,..,,,,,,.,,,..,,..,,...,...,.,.,...,...,,,.,...,
#FBJ7B6QMKQXUD5SNHLBB3XD3M3QYZHIKCFZUZUJYK4OHEWUFDD47VA7WOCZ3MYG4FFC7P6RUPZPXQ
#\\\|JT5KNZ6GGAKW7ZU4IWRPG7ZDFLQJKEKASHHAW2TD3SIEBGCIU4G \ / AMOS7 \ YOURUM ::
#\[7]5ALT4OXWVMTFHC5U7WHGTSPI6FR2ZMY5DQMDEWWQZ5NN3LU7IIBA 7  DATA SIGNATURE ::
#:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
