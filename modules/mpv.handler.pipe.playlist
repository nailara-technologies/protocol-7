# >:]

# name = mpv.handler.pipe.playlist

my $playlist_str  = '';
my $playlist_json = shift;
my $reply_id      = shift @{<mpv.reply_ids>};

my $playlist_data = decode_json($playlist_json);

map {
    $playlist_str .= exists $_->{'playing'} ? ':. ' : ':  ';
    $playlist_str .= $_->{'filename'} . "\n"
} @{$playlist_data};

<[base.callback.cmd_reply]>->(
    $reply_id,
    {   'mode' => 'raw',
        'data' => $playlist_str
    }
);
