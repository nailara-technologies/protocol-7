# >:]

# name = base.home

my $real_uid = $<;
my $real_gid = $<;
my $pwd_file = $code{'file.slurp'}->('/etc/passwd');

if ( length($pwd_file) ) {
  if( $pwd_file =~ /^([^\:]+:){2}$real_uid:$real_gid:[^\:]+:([^\:]+)/m ) {
    my $home_dir = $2;
    return $home_dir;
  } else {
    $code{'base.log'}->(0,"uid $real_uid not found in /etc/passwd");
  }
} else {
  $code{'base.log'}->(0,"failed to load /etc/passwd ($!)");
}
return undef;
