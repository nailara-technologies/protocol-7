
 .:[ (X11) XServer wrapper and interface agent ]:.

buffer.system.log_cmd = log.msg

[load_config_file:'defaults']

xserver.mode = auto-xephyr  # [host|xorg|xephyr|auto-xephyr|xvfb]

xserver.orientation = normal # <left|right|normal|inverted>[-x|-y]

xserver.display.xorg   = :0.0
xserver.display.xephyr = :1

xserver.renice_priority = -17

xserver.params.xorg    = -quiet

# xserver.custom_xrandr.0 = --auto --output HDMI1 --pos 500x500 \
#                           --mode 1920x1080 -r 60.00 --pos 1680x222
# xserver.custom_xrandr.1 = --auto --output HDMI3 --pos 0x0 \
#                           --mode 1280x1024 -r 75.02

xserver.params.xephyr = -screen 912x513   # '-glamor' added automatically

xserver.disable_glamor = 1

#xserver.params.xephyr = -screen 1040x110 # weather (mode 1)
#xserver.params.xephyr = -screen  672x130  # weather (mode 2)

#xserver.params.xephyr = -screen 1366x542

## testing backgroung image feature
# xserver.bg_image = '<system.root_path>/data/gfx/bg.nebula.1920x1080.png'
# xserver.bg_mode = tile # see 'hsetroot -h' for modes

xserver.bg_color = 000013

xserver.bg_fade = 1  # set to 0 to skip bg color fade in

xserver.connect_timeout = 7.7 # seconds

xserver.host_mode.min_size = 1920x1080

xserver.disable_blanking = yes
xserver.hide_mouse_cursor = yes
xserver.max_intel_gpu_freq = no
xserver.keybd.grab_all_keys = no  # block xserver clients from getting key input
xserver.host_mode_unchanged = yes # don't touch screen settings in host mode!

xserver.collect_intel_gpu_stats = 0  # using 'intel_gpu_top'
xserver.collect_gpu_stats_on_4K = 1  #  if >= 4K resolution
xserver.gpu_top.stat_log_level  = 3  # <- for debugging ...

# alert if load at :  secs
xserver.gpu_load.alert.5  = 98 # %
xserver.gpu_load.alert.15 = 92 # %
xserver.gpu_load.alert.30 = 75 # %

xserver.gpu_load.send_alerts = layout # agents to receive 'gpu_load_alert' cmds

access.cmd.usr.core = help message ping reload verify_instance get_xauth_data \
                      get_mode get_display get_params get_screen_size \
                      get_windows set_geometry raise_window lower_window \
                      get_geometry get_stack_order get_window_title \
                      set_gravity iconify_window get_orientation \
                      get_window_ids keep_above keep_below get_driver \
                      set_opacity get_opacity get_gpu_load * # XXX


modules.preload = xserver.config config.json
[load_modules:<modules.preload>]
[init_modules]

[config.json.import_file:'xserver.config.json']

modules.load = auth net io.ip xserver
[load_modules:<modules.load>]
[init_modules]

[set_privs:'nailara']

[net.connect_to_core:'tcp/ip']

[base.get_session_id]
[xserver.check_mouse]

[event.loop]
