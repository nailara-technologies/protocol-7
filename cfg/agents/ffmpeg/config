
 .:[ 'ffmpeg' (video resize) agent ]:.

buffer.agent.log_cmd = log.msg

[load_config_file:'shared-params']

access.cmd.usr.core = verify-instance ping help reload get_file \
                      get-config get-config-names rescale_video \
                      frame_count extract_last_frame

# modules.preload = download.config config.json
# [load_modules:<modules.preload>]
# [init_modules]
# [config.json.import_file:'ffmpeg.config.json']

modules.load = auth net io.ip ffmpeg config.json

ffmpeg.quality       = 20  # [18..28]
ffmpeg.drop_audio    = 0   # remove audio layer [0|1]
ffmpeg.threads       = 1   # max threads for conversion
ffmpeg.output_format = mp4 # reencoded video ouput format

ffmpeg.cfg.allow_slow_count = 1 # <- allow slow frame count method as fallback?

[load_modules:<modules.load>]
[init_modules]

[set_privs:'nailara']

[net.connect_to_core:'tcp/ip']

[base.get_session_id]

[event.loop]
