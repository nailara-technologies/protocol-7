
  .:[ mpv video player agent ]:.

buffer.system.log_cmd = log.msg
buffer.played.log_cmd = log.msg

[load_config_file:'defaults']

# mpv.rescale_path = /alternative/video/target/path

access.cmd.usr.core = name help ping get_subname reload verify_instance play \
                      add_file align-x align-y clear_playlist toggle_pause \
                      mpv_pid next pause playlist_update prev quit version \
                      reload_playlist resume seek show_playlist stop zoom \
                      get_config_names get_config current_file is_idle dump \
                      get_speed set_speed get_volume set_volume dump_buffer \
                      start_autoskip stop_autoskip autoskip_interval loop \
                      drop_buffers change_subname fade # <- incompl.

modules.load = auth net io.ip io.unix config.json digest mpv
[load_modules:<modules.load>]


mpv.log_played = 0   # seperately log which files or urls have been played(!)

mpv.fade_in    = 0   # disabled ( now done using the compton fade in option! )
mpv.auto_fs    = 1   # start in fullscreen mode in case no geometry was received
mpv.autoresize = 1   # autoresize player window to get rid of black borders

mpv.autorescale = 0  # rescale video automatically in the background (ffmpeg)

mpv.rescale_max_width = 1920 # limit ffmpeg reencoding video size

mpv.resume_timeout = 8         # media-child resume timeout (in seconds)
mpv.cleanup_rescaled_after = 8 # days (removes converted videos if not played..)

mpv.fade_idle_volume = 1 # silence / fade-in on mpv player 'core-idle' state
mpv.start_volume = 100 # % <- volume at startup ; fading to after 'core-idle'

mpv.vo_backend = opengl-hq # [vdpau|vaapi|x11|sdl...] ( see mpv -vo help )
mpv.hwdec = auto

mpv.fade_start_geom = 1x1--0--0
#mpv.fade_start_geom = 31x31--0--0 # use this if above geometry fails at startup

#            --loop-playlist # for 'kiosk' mode
#            --idle=once # with spawn on demand ...
mpv.params = --idle --force-window --keep-open=yes \
              --no-config --no-window-dragging --no-border \
              --no-input-terminal --no-input-cursor --input-vo-keyboard \
              --no-input-default-bindings --osc=no --osd-level=0 --really-quiet

mpv.audio_params = -vo null --idle=yes --loop-playlist --no-config --really-quiet

[init_modules]

[set_privs:<system.privs.user>]

[net.connect_to_core:'tcp/ip']

[base.x11.get_mode]
[base.x11.get_display]
mpv.geometry = [base.x11.get_geometry]
mpv.coordinates = [base.x11.get_coordinates]

[config.json.import_file:'mpv.config.json'] # .. from /etc/nailara/import/ ..

[mpv.open_player]
# [base.x11.keep_below:<x11.id>]

[mpv.initialize.observe_properties]

[base.get_session_id]

[mpv.get_playlist:'video']

[event.loop]
